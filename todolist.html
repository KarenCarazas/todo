<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8" />
    <title>DBP</title>
	</head>
	<body>
    <script>
	
        function addTask() {
            const li = document.createElement("li");
            const button = document.createElement("button");
            const input = document.createElement("input");
			
            button.innerHTML = "x";
            button.setAttribute("onclick", "deletetask(this)");
            input.setAttribute("type", "checkbox");
            input.setAttribute("onchange", "tachar(this)");
	
            li.appendChild(input);
            li.append(document.querySelector('#task').value);
            li.appendChild(button);
		
            document.querySelector('#tasks').append(li);
            document.querySelector('#task').value = '';
			
            return false;
        }

        function tachar(cb) {
            if (cb.checked) {
                const del = document.createElement("del");
                cb_text = cb.nextSibling;
                del.appendChild(cb_text);
                cb.after(del);
            } 
			else {
                del = cb.nextSibling;
                text = del.firstChild;
                del.remove();
                cb.after(text);
            }
        }

        function deletetask(button) {
            li = button.parentElement;
            li.remove();
        }

        function delall() {
            ol = document.querySelector('#tasks');
            while (ol.firstChild) {
                ol.removeChild(ol.lastChild);
            }
        }
	
		
    </script>

    <p>Computer Science</p>
    <h1>Tasks</h1>
    <form id="new-task">
        <input id="task" autocomplete="off" autofocus placeholder="New Task" type="text">
        <input type="submit" onclick='addTask()'>
    </form>
    <br>
    <button type='button' onclick='completeall()'>Complete All</button>
    <button type='button' onclick='delall()'>Delete All</button>
    <ol id="tasks">
        <li> <input type="checkbox" onchange='tachar(this)'> Primera Tarea <button type="button" onclick='deletetask(this)'>x</button>
        </li>
    </ol>
</body>

</html>
